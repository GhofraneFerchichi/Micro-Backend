spring:
  application:
    name: gateway
  config:
    import: optional:configserver:http://51.8.240.21:9012  # Updated Config server IP address
---
eureka:
  instance:
    hostname: 51.8.240.59  # Updated with the gateway external IP
  client:
    serviceUrl:
      defaultZone: http://51.8.240.64:8761/eureka  # Updated Eureka defaultZone

server:
  port: 8007

spring:
  application:
    name: gateway
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
      routes:
        - id: mcommandes
          uri: lb://commande-microservice   # Utilisation du nom du service au lieu de localhost
          predicates:
            - Path=/api/v1/mcommandes/**
        - id: mproduits
          uri: lb://produit-microservice   # Utilisation du nom du service au lieu de localhost
          predicates:
            - Path=/api/v1/mproduits/**
        - id: mpanier
          uri: lb://produit-microservice   # Utilisation du nom du service au lieu de localhost
          predicates:
            - Path=/api/v1/mpanier/**
        - id: user-microservice
          uri: lb://user-microservice   # Utilisation du nom du service au lieu de localhost
          predicates:
            - Path=/api/authentication/**, /user/**

management:
  tracing:
    sampling:
      probability: 1.0
